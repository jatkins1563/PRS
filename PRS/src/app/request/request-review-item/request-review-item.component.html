<app-menu></app-menu>
<div id="component">
    <div id="component-header">
        <h3>Review Request Item</h3>
    </div>
    <div id="component-content">
        <table id="wide" class="table table-stripped">
            <thead>
            <tr>
                <th>Id</th>
                <th>Description</th>
                <th>Status</th>
                <th>Total</th>
                <th>User</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngIf="request">
                <td>{{request.id}}</td>
                <td>{{request.description}}</td>
                <td>{{request.status}}</td>
                <td>{{request.total * 100}} Gold</td>
                <td *ngIf="request.user">{{request.user.username}}</td>
            </tr>
        </tbody>
        </table>
        <table id="wide" class="table table-stripped">
            <thead>
            <tr>
                <th>ID</th>
                <th>Product</th>
                <th>Quantity</th>
                <th>Price</th>
                <th>Line Total</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let rl of requestLines">
                <td>{{rl.id}}</td>
                <td *ngIf="rl.product">{{rl.product.name}}</td>
                <td>{{rl.quantity}}</td>
                <td *ngIf="rl.product">{{rl.product.price}}00 Gold</td>
                <td>{{rl.lineTotal}}00 Gold</td>
            </tr>
        </tbody>
        </table>
    </div>
    <div id="component-footer">
        <button (click)="approve()" class="btn btn-primary btn-sm" *ngIf="!rejVerify">Approve</button>
        <button (click)="approve()" class="btn btn-primary btn-sm" *ngIf="rejVerify" disabled>Why?</button> | 
        <button (click)="verify()" class="btn btn-danger btn-sm" *ngIf="!rejVerify">Reject</button>
        <button (click)="verify()" class="btn btn-info btn-sm" *ngIf="rejVerify">Nevermind</button>
        <span *ngIf="rejVerify"> | </span>
        <button (click)="reject()" class="btn btn-danger btn-sm" *ngIf="rejVerify">Confirm</button>
        <br *ngIf="rejVerify">
        <span *ngIf="rejReason">Reason required for rejection!</span>
        <br *ngIf="rejVerify">
        <input *ngIf="rejVerify" [(ngModel)]="request.rejectionReason" type="text" placeholder="Enter a rejection reason...">
    </div>
</div>